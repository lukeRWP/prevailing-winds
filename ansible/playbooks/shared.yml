---
# Provision shared infrastructure (Vault + Runner + Orchestrator)
# Usage: ansible-playbook playbooks/shared.yml -i inventories/shared/hosts.yml

- name: Common setup for shared hosts
  hosts: all
  become: yes
  roles:
    - common

- name: Configure Vault server
  hosts: "{{ group_vault }}"
  become: yes
  roles:
    - vault

- name: Configure GitHub Actions runner
  hosts: "{{ group_runner }}"
  become: yes
  roles:
    - github-runner

- name: Configure Orchestrator
  hosts: "{{ group_orchestrator }}"
  become: yes
  roles:
    - nodejs
    - orchestrator
