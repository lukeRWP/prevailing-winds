---
# Defaults for MySQL role — orchestrator overrides mysql_databases,
# mysql_schema_prefix, and mysql_admin_db via extra-vars from app manifest.
app_name: "imp"
mysql_version: "8.0"
mysql_port: 3306
mysql_data_dir: /var/lib/mysql
mysql_ssl_dir: /etc/mysql/ssl
mysql_config_dir: /etc/mysql/mysql.conf.d
mysql_backup_dir: "/opt/{{ app_name }}-db/backups"
mysql_max_connections: 200
mysql_innodb_buffer_pool_size: "4G"

# Database names (defaults to IMP's 13 databases, override per app)
mysql_databases:
  - IMP_PROJECTS
  - IMP_PROGRAMS
  - IMP_LOCATIONS
  - IMP_USERS
  - IMP_MILESTONES
  - IMP_CAPITAL
  - IMP_ADMIN
  - IMP_REPORTING
  - IMP_ANALYTICS
  - IMP_IMPORTS
  - IMP_EXPORTS
  - IMP_FILES
  - IMP_NOTES

# Admin database (holds schema_migrations table)
mysql_admin_db: "IMP_ADMIN"
mysql_schema_prefix: "IMP_"

# SSL certificate identity
mysql_ssl_org: "{{ app_name | upper }}"

# Credentials — bridge from vault_* group_vars (set by orchestrator's
# ansibleVarsGenerator) to the role's native variable names.
mysql_root_password: "{{ vault_mysql_root_password | default('') }}"
mysql_app_user: "{{ vault_mysql_user | default(app_name + '_api_001') }}"
mysql_app_password: "{{ vault_mysql_password | default('') }}"
mysql_ssl_user: "{{ vault_mysql_ssl_user | default(app_name + '_ssl_user') }}"
mysql_ssl_password: "{{ vault_mysql_ssl_password | default('') }}"

# Init flag
mysql_init_databases: false
